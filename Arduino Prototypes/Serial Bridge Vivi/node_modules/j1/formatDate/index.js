const leftpad = require('../leftpad');
const getOffsetString = require('./getOffsetString');

function formatDate(
	dateSrc = new Date(),
	format = '%YYYY-%MM-%DD %hh:%mm:%ss',
	{monthNames, dayNames} = {
		monthNames: [
			'January',
			'February',
			'March',
			'April',
			'May',
			'June',
			'July',
			'August',
			'September',
			'October',
			'November',
			'December'
		],
		dayNames: [
			'Sunday',
			'Monday',
			'Tuesday',
			'Wednesday',
			'Thursday',
			'Friday',
			'Saturday'
		]
	}
) {
	const date = new Date(dateSrc);
	const Y = date.getFullYear();
	const M = date.getMonth();
	const D = date.getDate();
	const h = date.getHours();
	const m = date.getMinutes();
	const s = date.getSeconds();
	const d = date.getDay();
	return format
		.replace(/%[YMDOhmsd]+/g, (match) => {
			switch (match) {
				case '%YYYY':
					match = leftpad(Y, 4);
					break;
				case '%YY':
					match = leftpad(Y, 2).slice(-2);
					break;
				case '%MMMM':
					match = monthNames[M];
					break;
				case '%MMM':
					match = monthNames[M].slice(0, 3);
					break;
				case '%MM':
					match = leftpad(M + 1, 2);
					break;
				case '%M':
					match = M + 1;
					break;
				case '%DD':
					match = leftpad(D, 2);
					break;
				case '%D':
					match = D;
					break;
				case '%hh':
					match = leftpad(h, 2);
					break;
				case '%h':
					match = h;
					break;
				case '%mm':
					match = leftpad(m, 2);
					break;
				case '%m':
					match = m;
					break;
				case '%ss':
					match = leftpad(s, 2);
					break;
				case '%s':
					match = s;
					break;
				case '%dddd':
					match = dayNames[d];
					break;
				case '%ddd':
					match = dayNames[d].slice(0, 3);
					break;
				case '%O':
					match = getOffsetString(date);
					break;
			}
			return match;
		});
}

module.exports = formatDate;
