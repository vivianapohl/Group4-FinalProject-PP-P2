const assert = require('assert');
const getHash = require('..');

describe('getHash', function () {

	it('should return a sha256 hash', function () {
		const source = '0';
		const expectedHash = '5feceb66ffc86f38d952786c6d696c79c2dbc239dd4e91b46729d73a27fb57e9';
		assert.equal(getHash(source), expectedHash);
	});

	it('should return a md5 hash', function () {
		const source = '0';
		const expectedHash = 'cfcd208495d565ef66e7dff9f98764da';
		assert.equal(getHash(source, 'md5'), expectedHash);
	});

	it('should return different hash if the source is different', function () {
		function *sources(from, to) {
			while (from++ < to) {
				yield from.toString(16);
			}
		}
		const known = [];
		for (const source of sources(0, 1000)) {
			const hash = getHash(source);
			assert.equal(known.includes(hash), false);
			known[known.length] = hash;
		}
	});

});
