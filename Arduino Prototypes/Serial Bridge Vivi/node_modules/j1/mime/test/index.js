const assert = require('assert');
const mime = require('..');

describe('mime', function () {

	beforeEach(function () {
		mime.reset();
	});

	[
		['text/plain', '.txt'],
		['text/html', '.html'],
		['text/html', '.htm'],
		['text/css', '.css'],
		['application/javascript', '.js'],
		['image/jpeg', '.jpg'],
		['image/jpeg', '.jpeg'],
		['image/png', '.png'],
		['image/gif', '.gif'],
		['image/svg+xml', '.svg'],
		['application/x-font-ttf', '.ttf'],
		['application/x-font-otf', '.otf'],
		['application/font-woff', '.woff']
	].forEach(([mimeType, ext]) => {
		it(`should return "${mimeType} from "mime("file${ext}")`, function () {
			assert.equal(mime('file' + ext), mimeType);
		});
	});

	[
		['text/plain; charset=utf-8', '.txt'],
		['text/html', '.html'],
		['text/css', '.css'],
		['application/javascript', '.js'],
		['image/jpeg', '.jpg'],
		['image/png', '.png'],
		['image/gif', '.gif'],
		['image/svg+xml', '.svg'],
		['application/x-font-ttf', '.ttf'],
		['application/x-font-otf', '.otf'],
		['application/font-woff', '.woff']
	].forEach(([mimeType, ext]) => {
		it(`should return "${ext} from "mime.extname("file${mimeType}")`, function () {
			assert.equal(mime.extname(mimeType), ext);
		});
	});

	it('should add a type', function () {
		mime.add('image/test', '.test');
		assert.equal(mime('file.test'), 'image/test');
	});

	it('should clear known types', function () {
		mime.clear();
		assert.equal(mime('file.jpg'), 'text/plain');
	});

	it('should return an array of known types', function () {
		mime.clear();
		mime.add('image/test', '.test');
		assert.deepEqual(mime.list(), [
			['image/test', '.test']
		]);
	});

});
